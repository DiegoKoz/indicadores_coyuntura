---
title: "Datos Bea"
output: html_notebook
---

https://github.com/us-bea/bea.R/blob/master/beaR_instructions.pdf

```{r}
#install.packages('bea.R')
library(bea.R)
library(tidyverse)

```

```{r}
beaKey 	<- read_file('fuentes/bea_apikey.txt')
```

```{r}
beaSpecs <- list(
  'UserID' = beaKey ,
  'Method' = 'GetData',
  'datasetname' = 'NIPA',
  'TableName' = 'T20305',
  'Frequency' = 'Q',
  'Year' = 'X',
  'ResultFormat' = 'json'
)
beaPayload <- beaGet(beaSpecs)
beaPayload
```

```{r}
beaPayload %>% 
  gather(periodo, valor, 8:ncol(.)) %>% 
  separate(periodo, into = c('year','quarter'),sep = 'Q') %>% 
  mutate(year = str_match(year, pattern = '\\d{4}'))
```

